# إعداد نظام إدارة المستخدمين

## الخطوات المطلوبة لتفعيل النظام:

### 1. تشغيل Migration الجديد
```bash
php artisan migrate
```

### 2. تشغيل Seeder لإنشاء المستخدمين الافتراضيين
```bash
php artisan db:seed --class=UserSeeder
```

## بيانات الدخول الافتراضية:

### المدير العام:
- البريد الإلكتروني: `admin@ayaz.com`
- كلمة المرور: `password`
- الصلاحية: مدير (admin)

### المستخدم العادي:
- البريد الإلكتروني: `fatima@ayaz.com`
- كلمة المرور: `password`
- الصلاحية: مستخدم (user)

## الميزات المضافة:

### 1. إدارة المستخدمين (للمديرين فقط):
- إضافة مستخدمين جدد
- تعديل بيانات المستخدمين
- حذف المستخدمين
- تفعيل/إلغاء تفعيل المستخدمين
- تحديد الصلاحيات (مدير/مستخدم)

### 2. نظام الصلاحيات:
- المديرون: يمكنهم الوصول لجميع الميزات + إدارة المستخدمين
- المستخدمون العاديون: يمكنهم الوصول للميزات الأساسية فقط

### 3. الحماية:
- Middleware للتحقق من صلاحيات المدير
- منع المستخدم من حذف حسابه الخاص
- تشفير كلمات المرور

## الملفات المضافة/المحدثة:

### Controllers:
- `app/Http/Controllers/UserController.php`

### Middleware:
- `app/Http/Middleware/AdminMiddleware.php`

### Models:
- تحديث `app/Models/User.php` (إضافة الصلاحيات)

### Views:
- `resources/views/users/index.blade.php`
- `resources/views/users/create.blade.php`
- `resources/views/users/edit.blade.php`

### Migrations:
- `database/migrations/2024_01_01_000006_add_role_to_users_table.php`

### Routes:
- تحديث `routes/web.php` (إضافة مسارات المستخدمين)

### Styles:
- `public/css/users.css`

## كيفية الوصول لإدارة المستخدمين:

1. سجل دخول كمدير باستخدام البيانات أعلاه
2. في الصفحة الرئيسية، ستجد بطاقة "إدارة المستخدمين"
3. اضغط عليها للوصول لصفحة إدارة المستخدمين

## ملاحظات مهمة:

- فقط المديرون يمكنهم رؤية والوصول لإدارة المستخدمين
- المستخدمون العاديون لن يروا هذه الميزة في القائمة الرئيسية
- لا يمكن للمستخدم حذف حسابه الخاص
- جميع كلمات المرور مشفرة في قاعدة البيانات