<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>عرض الطلبية - مطبعة آياز</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <div class="app-container">
        <main class="main-content">
            <div class="page-header">
                <a href="orders.html" class="back-btn">
                    <i data-lucide="arrow-right"></i>
                </a>
                <h2>تفاصيل الطلبية</h2>
                <a href="edit-order.html" class="add-btn">
                    <i data-lucide="edit-2"></i>
                </a>
            </div>
            
            <div class="view-container">
                <!-- Order Info Section -->
                <div class="section-header">
                    <i data-lucide="file-text"></i>
                    <h3>بيانات الطلبية</h3>
                </div>
                
                <div class="info-grid">
                    <div class="info-item">
                        <label>رقم الطلبية</label>
                        <span>ORD-001</span>
                    </div>
                    <div class="info-item">
                        <label>التاريخ</label>
                        <span>2024-01-15</span>
                    </div>
                    <div class="info-item">
                        <label>اسم العميل</label>
                        <span>أحمد محمد</span>
                    </div>
                    <div class="info-item">
                        <label>النوع</label>
                        <span>بطاقات عمل</span>
                    </div>
                    <div class="info-item full-width">
                        <label>التفاصيل</label>
                        <span>1000 بطاقة عمل ملونة مع تصميم خاص وطباعة على ورق فاخر</span>
                    </div>
                    <div class="info-item">
                        <label>الكلفة</label>
                        <span>250 دولار</span>
                    </div>
                    <div class="info-item">
                        <label>حالة الطلبية</label>
                        <span class="status new">جديدة</span>
                    </div>
                    <div class="info-item">
                        <label>تاريخ التسليم</label>
                        <span>2024-01-20</span>
                    </div>
                    <div class="info-item">
                        <label>مدقق الطلب</label>
                        <span>أحمد محمد</span>
                    </div>
                    <div class="info-item">
                        <label>المنفذ</label>
                        <span>فاطمة علي</span>
                    </div>
                </div>
                
                <!-- Attachments Section -->
                <div class="section-header">
                    <i data-lucide="paperclip"></i>
                    <h3>المرفقات</h3>
                </div>
                
                <div class="attachments-list" id="attachmentsList">
                    <div class="attachment-item">
                        <div class="attachment-info">
                            <i data-lucide="file-text"></i>
                            <span>تصميم البطاقة.pdf</span>
                        </div>
                        <button class="delete-attachment" onclick="deleteAttachment(this)">
                            <i data-lucide="trash-2"></i>
                        </button>
                    </div>
                    <div class="attachment-item">
                        <div class="attachment-info">
                            <i data-lucide="image"></i>
                            <span>لوجو الشركة.png</span>
                        </div>
                        <button class="delete-attachment" onclick="deleteAttachment(this)">
                            <i data-lucide="trash-2"></i>
                        </button>
                    </div>
                </div>
                
                <div class="add-attachment">
                    <div class="file-upload-area" id="fileUploadArea">
                        <input type="file" class="file-upload-input" id="newAttachment" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls,.psd">
                        <div class="file-upload-content">
                            <div class="file-upload-icon">
                                <i data-lucide="upload"></i>
                            </div>
                            <div class="file-upload-text">
                                <h4>اسحب الملفات هنا أو اضغط للتحديد</h4>
                                <p>PDF, Word, صور, Excel, Photoshop</p>
                            </div>
                        </div>
                    </div>
                    <div class="uploaded-files" id="newUploadedFiles"></div>
                </div>
                
                <!-- Audio Section -->
                <div class="section-header">
                    <i data-lucide="mic"></i>
                    <h3>المقاطع الصوتية</h3>
                </div>
                
                <div class="audio-list" id="existingAudioList">
                    <div class="audio-item">
                        <span>تسجيل 1</span>
                        <audio controls>
                            <source src="#" type="audio/wav">
                        </audio>
                        <button class="delete-audio" onclick="deleteAudio(this)">حذف</button>
                    </div>
                    <div class="audio-item">
                        <span>تسجيل 2</span>
                        <audio controls>
                            <source src="#" type="audio/wav">
                        </audio>
                        <button class="delete-audio" onclick="deleteAudio(this)">حذف</button>
                    </div>
                </div>
                
                <div class="audio-recorder">
                    <button type="button" class="record-btn" id="recordBtn">
                        <i data-lucide="mic"></i>
                        بدء التسجيل
                    </button>
                    <div class="audio-list" id="newAudioList"></div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="index.html" class="nav-item">
                <i data-lucide="home"></i>
                <span>الرئيسية</span>
            </a>
            <a href="reports.html" class="nav-item">
                <i data-lucide="bar-chart-3"></i>
                <span>التقارير</span>
            </a>
            <a href="settings.html" class="nav-item">
                <i data-lucide="settings"></i>
                <span>الإعدادات</span>
            </a>
        </nav>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            initializeAudioRecorder();
            
            // Handle new attachment upload
            document.getElementById('newAttachment').addEventListener('change', function(e) {
                const files = e.target.files;
                for (let file of files) {
                    addAttachmentToList(file.name);
                }
            });
        });
        
        function addAttachmentToList(fileName) {
            const attachmentsList = document.getElementById('attachmentsList');
            const attachmentItem = document.createElement('div');
            attachmentItem.className = 'attachment-item';
            
            const fileIcon = fileName.toLowerCase().includes('.pdf') ? 'file-text' : 
                           fileName.toLowerCase().match(/\.(jpg|jpeg|png)$/) ? 'image' : 'file';
            
            attachmentItem.innerHTML = `
                <div class="attachment-info">
                    <i data-lucide="${fileIcon}"></i>
                    <span>${fileName}</span>
                </div>
                <button class="delete-attachment" onclick="deleteAttachment(this)">
                    <i data-lucide="trash-2"></i>
                </button>
            `;
            
            attachmentsList.appendChild(attachmentItem);
            lucide.createIcons();
        }
        
        function deleteAttachment(button) {
            if (confirm('هل أنت متأكد من حذف هذا المرفق؟')) {
                button.parentElement.remove();
                showNotification('تم حذف المرفق');
            }
        }
        
        function deleteAudio(button) {
            if (confirm('هل أنت متأكد من حذف هذا التسجيل؟')) {
                button.parentElement.remove();
                showNotification('تم حذف التسجيل');
            }
        }
    </script>
</body>
</html>